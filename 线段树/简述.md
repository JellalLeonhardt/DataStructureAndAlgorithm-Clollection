# 简述
线段树是一种二叉搜索树，与区间树相似，它将线段树一个区间划分成一些单元区间，每个单元区间对应线段树中的一个叶结点。   
使用线段树可以快速的查找某一个节点在若干条线段中出现的次数，时间复杂度为O(logN)。而未优化的空间复杂度为2N，实际应用时一般还要开4N的数组以免越界，因此有时需要离散化让空间压缩。   
对于线段树中的每一个非叶子节点[a, b]，它的左儿子表示的区间为[a, (a+b)/2]，右儿子表示的区间为[(a+b)/2+1, b]。因此线段树是平衡二叉树，最后的子节点数目为N，即整个线段区间的长度。   
# 标记
标记有两种方式，一是标记的值记录区间内所有的被标记（操作）的情况和，普通标记 f，二是节点区间内全部点被标记（操作）则对这个节点做标记（操作）来表示，又称延时标记/懒标记 v
v标记在对区间操作如查询插入删除时操作迅速，f则是在对区间进行统计时便利
（v标记的查询针对的是，查询某一具体的点或具体段落，f标记的统计则是统计某一区间的所有点的点数和这种情况）
两种标记配合使用事半功倍，但如果不涉及统计则无需使用f标记，如果涉及查询最大最小值则两者配合最佳
# 后言
线段树的思想在于，通过对区间二分，使得对某一区间的操作可通过对若干个区间段（若干个节点）操作来减少工作量。同时通过对标记不同的运用和更新，使得统计和做运算时的量大为减少，线段树是一种比较灵活的结构，在不同的场景下通过对标记赋予不同的意义和操作来达到不同的目的。